{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/credit-card-type/index.js","src/js/controllers/credit-card-form.js","src/js/controllers/credit-card-list.js","src/js/load.js","src/js/main.js","src/js/services/form-service.js","src/js/services/handlebar-loader.js","src/js/services/smiles-server.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACrcA,IAAI,IAAI,QAAQ,QAAR,CAAR;;AAEA,IAAI,iBAAiB,QAAQ,kBAAR,CAArB;;AAEA,IAAI,cAAc,QAAQ,6BAAR,CAAlB;AACA,IAAI,kBAAkB,Q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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\n\nvar testOrder;\nvar types = {};\nvar customCards = {};\nvar VISA = 'visa';\nvar MASTERCARD = 'mastercard';\nvar AMERICAN_EXPRESS = 'american-express';\nvar DINERS_CLUB = 'diners-club';\nvar DISCOVER = 'discover';\nvar ELO = 'elo';\nvar JCB = 'jcb';\nvar UNIONPAY = 'unionpay';\nvar MAESTRO = 'maestro';\nvar MIR = 'mir';\nvar CVV = 'CVV';\nvar CID = 'CID';\nvar CVC = 'CVC';\nvar CVN = 'CVN';\nvar CVP2 = 'CVP2';\nvar CVE = 'CVE';\nvar ORIGINAL_TEST_ORDER = [\n  VISA,\n  MASTERCARD,\n  AMERICAN_EXPRESS,\n  DINERS_CLUB,\n  DISCOVER,\n  JCB,\n  UNIONPAY,\n  MAESTRO,\n  ELO,\n  MIR\n];\n\nfunction clone(originalObject) {\n  var dupe;\n\n  if (!originalObject) { return null; }\n\n  dupe = JSON.parse(JSON.stringify(originalObject));\n\n  return dupe;\n}\n\ntestOrder = clone(ORIGINAL_TEST_ORDER);\n\ntypes[VISA] = {\n  niceType: 'Visa',\n  type: VISA,\n  patterns: [\n    4\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16, 18, 19],\n  code: {\n    name: CVV,\n    size: 3\n  }\n};\n\ntypes[MASTERCARD] = {\n  niceType: 'Mastercard',\n  type: MASTERCARD,\n  patterns: [\n    [51, 55],\n    [2221, 2229],\n    [223, 229],\n    [23, 26],\n    [270, 271],\n    2720\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16],\n  code: {\n    name: CVC,\n    size: 3\n  }\n};\n\ntypes[AMERICAN_EXPRESS] = {\n  niceType: 'American Express',\n  type: AMERICAN_EXPRESS,\n  patterns: [\n    34,\n    37\n  ],\n  gaps: [4, 10],\n  lengths: [15],\n  code: {\n    name: CID,\n    size: 4\n  }\n};\n\ntypes[DINERS_CLUB] = {\n  niceType: 'Diners Club',\n  type: DINERS_CLUB,\n  patterns: [\n    [300, 305],\n    36,\n    38,\n    39\n  ],\n  gaps: [4, 10],\n  lengths: [14, 16, 19],\n  code: {\n    name: CVV,\n    size: 3\n  }\n};\n\ntypes[DISCOVER] = {\n  niceType: 'Discover',\n  type: DISCOVER,\n  patterns: [\n    6011,\n    [644, 649],\n    65\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16, 19],\n  code: {\n    name: CID,\n    size: 3\n  }\n};\n\ntypes[JCB] = {\n  niceType: 'JCB',\n  type: JCB,\n  patterns: [\n    2131,\n    1800,\n    [3528, 3589]\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16, 17, 18, 19],\n  code: {\n    name: CVV,\n    size: 3\n  }\n};\n\ntypes[UNIONPAY] = {\n  niceType: 'UnionPay',\n  type: UNIONPAY,\n  patterns: [\n    620,\n    [624, 626],\n    [62100, 62182],\n    [62184, 62187],\n    [62185, 62197],\n    [62200, 62205],\n    [622010, 622999],\n    622018,\n    [622019, 622999],\n    [62207, 62209],\n    [622126, 622925],\n    [623, 626],\n    6270,\n    6272,\n    6276,\n    [627700, 627779],\n    [627781, 627799],\n    [6282, 6289],\n    6291,\n    6292\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16, 17, 18, 19],\n  code: {\n    name: CVN,\n    size: 3\n  }\n};\n\ntypes[MAESTRO] = {\n  niceType: 'Maestro',\n  type: MAESTRO,\n  patterns: [\n    493698,\n    [500000, 506698],\n    [506779, 508999],\n    [56, 59],\n    63,\n    67,\n    6\n  ],\n  gaps: [4, 8, 12],\n  lengths: [12, 13, 14, 15, 16, 17, 18, 19],\n  code: {\n    name: CVC,\n    size: 3\n  }\n};\n\ntypes[ELO] = {\n  niceType: 'Elo',\n  type: ELO,\n  patterns: [\n    401178,\n    401179,\n    438935,\n    457631,\n    457632,\n    431274,\n    451416,\n    457393,\n    504175,\n    [506699, 506778],\n    [509000, 509999],\n    627780,\n    636297,\n    636368,\n    [650031, 650033],\n    [650035, 650051],\n    [650405, 650439],\n    [650485, 650538],\n    [650541, 650598],\n    [650700, 650718],\n    [650720, 650727],\n    [650901, 650978],\n    [651652, 651679],\n    [655000, 655019],\n    [655021, 655058]\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16],\n  code: {\n    name: CVE,\n    size: 3\n  }\n};\n\ntypes[MIR] = {\n  niceType: 'Mir',\n  type: MIR,\n  patterns: [\n    [2200, 2204]\n  ],\n  gaps: [4, 8, 12],\n  lengths: [16, 17, 18, 19],\n  code: {\n    name: CVP2,\n    size: 3\n  }\n};\n\nfunction findType(type) {\n  return customCards[type] || types[type];\n}\n\nfunction isValidInputType(cardNumber) {\n  return typeof cardNumber === 'string' || cardNumber instanceof String;\n}\n\nfunction hasEnoughResultsToDetermineBestMatch(results) {\n  var numberOfResultsWithMaxStrengthProperty = results.filter(function (result) {\n    return result.matchStrength;\n  }).length;\n\n  // if all possible results have a maxStrength property\n  // that means the card number is sufficiently long\n  // enough to determine conclusively what the type is\n  return numberOfResultsWithMaxStrengthProperty > 0 &&\n    numberOfResultsWithMaxStrengthProperty === results.length;\n}\n\nfunction findBestMatch(results) {\n  if (!hasEnoughResultsToDetermineBestMatch(results)) {\n    return;\n  }\n\n  return results.reduce(function (bestMatch, result) { // eslint-disable-line consistent-return\n    if (!bestMatch) {\n      return result;\n    }\n\n    // if the current best match pattern is less specific\n    // than this result, set the result as the new best match\n    if (bestMatch.matchStrength < result.matchStrength) {\n      return result;\n    }\n\n    return bestMatch;\n  });\n}\n\nfunction getAllCardTypes() {\n  return testOrder.map(function (type) {\n    return clone(findType(type));\n  });\n}\n\nfunction creditCardType(cardNumber) {\n  var bestMatch;\n  var results = [];\n\n  if (!isValidInputType(cardNumber)) {\n    return [];\n  }\n\n  if (cardNumber.length === 0) {\n    return getAllCardTypes();\n  }\n\n  testOrder.forEach(function (type) {\n    var cardConfiguration = findType(type);\n\n    loopOverCardPatterns(cardNumber, cardConfiguration, results);\n  });\n\n  bestMatch = findBestMatch(results);\n\n  if (bestMatch) {\n    return [bestMatch];\n  }\n\n  return results;\n}\n\nfunction loopOverCardPatterns(cardNumber, cardConfiguration, results) {\n  var i, pattern, patternLength, clonedCardConfiguration;\n\n  for (i = 0; i < cardConfiguration.patterns.length; i++) {\n    pattern = cardConfiguration.patterns[i];\n\n    if (!matches(cardNumber, pattern)) {\n      continue;\n    }\n\n    clonedCardConfiguration = clone(cardConfiguration);\n\n    if (Array.isArray(pattern)) {\n      patternLength = String(pattern[0]).length;\n    } else {\n      patternLength = String(pattern).length;\n    }\n\n    if (cardNumber.length >= patternLength) {\n      clonedCardConfiguration.matchStrength = patternLength;\n    }\n\n    results.push(clonedCardConfiguration);\n    break;\n  }\n}\n\nfunction matches(cardNumber, pattern) {\n  if (Array.isArray(pattern)) {\n    return matchesRange(cardNumber, pattern[0], pattern[1]);\n  }\n\n  return matchesPattern(cardNumber, pattern);\n}\n\nfunction matchesPattern(cardNumber, pattern) {\n  pattern = String(pattern);\n\n  return pattern.substring(0, cardNumber.length) === cardNumber.substring(0, pattern.length);\n}\n\n// Adapted from https://github.com/polvo-labs/card-type/blob/aaab11f80fa1939bccc8f24905a06ae3cd864356/src/cardType.js#L37-L42\nfunction matchesRange(cardNumber, min, max) {\n  var maxLengthToCheck = String(min).length;\n  var substr = cardNumber.substr(0, maxLengthToCheck);\n  var integerRepresentationOfCardNumber = parseInt(substr, 10);\n\n  min = parseInt(String(min).substr(0, substr.length), 10);\n  max = parseInt(String(max).substr(0, substr.length), 10);\n\n  return integerRepresentationOfCardNumber >= min && integerRepresentationOfCardNumber <= max;\n}\n\ncreditCardType.getTypeInfo = function (type) {\n  return clone(findType(type));\n};\n\nfunction getCardPosition(name, ignoreErrorForNotExisting) {\n  var position = testOrder.indexOf(name);\n\n  if (!ignoreErrorForNotExisting && position === -1) {\n    throw new Error('\"' + name + '\" is not a supported card type.');\n  }\n\n  return position;\n}\n\ncreditCardType.removeCard = function (name) {\n  var position = getCardPosition(name);\n\n  testOrder.splice(position, 1);\n};\n\ncreditCardType.addCard = function (config) {\n  var existingCardPosition = getCardPosition(config.type, true);\n\n  customCards[config.type] = config;\n\n  if (existingCardPosition === -1) {\n    testOrder.push(config.type);\n  }\n};\n\ncreditCardType.updateCard = function (cardType, updates) {\n  var clonedCard;\n  var originalObject = customCards[cardType] || types[cardType];\n\n  if (!originalObject) {\n    throw new Error('\"' + cardType + '\" is not a recognized type. Use `addCard` instead.');\n  }\n\n  if (updates.type && originalObject.type !== updates.type) {\n    throw new Error('Cannot overwrite type parameter.');\n  }\n\n  clonedCard = clone(originalObject, true);\n\n  Object.keys(clonedCard).forEach(function (key) {\n    if (updates[key]) {\n      clonedCard[key] = updates[key];\n    }\n  });\n\n  customCards[clonedCard.type] = clonedCard;\n};\n\ncreditCardType.changeOrder = function (name, position) {\n  var currentPosition = getCardPosition(name);\n\n  testOrder.splice(currentPosition, 1);\n  testOrder.splice(position, 0, name);\n};\n\ncreditCardType.resetModifications = function () {\n  testOrder = clone(ORIGINAL_TEST_ORDER);\n  customCards = {};\n};\n\ncreditCardType.types = {\n  VISA: VISA,\n  MASTERCARD: MASTERCARD,\n  AMERICAN_EXPRESS: AMERICAN_EXPRESS,\n  DINERS_CLUB: DINERS_CLUB,\n  DISCOVER: DISCOVER,\n  JCB: JCB,\n  UNIONPAY: UNIONPAY,\n  MAESTRO: MAESTRO,\n  ELO: ELO,\n  MIR: MIR\n};\n\nmodule.exports = creditCardType;\n","var $ = require(\"jquery\");\r\n\r\nvar CreditCardType = require('credit-card-type');\r\n\r\nvar FormService = require(\"../services/form-service.js\");\r\nvar HandlebarLoader = require(\"../services/handlebar-loader\");\r\nvar SmilesServer = require(\"../services/smiles-server\");\r\n\r\nvar CreditCardFormInstance = null;\r\nmodule.exports = class CreditCardForm {\r\n  constructor() {\r\n    if(CreditCardFormInstance) return CreditCardFormInstance;\r\n    this.hb = null;\r\n    CreditCardFormInstance = this;\r\n  };\r\n\r\n  load(){\r\n    if(this.hb == null) {\r\n      this.hb = new HandlebarLoader()\r\n        .loadTemplate(\"sections/credit-card-form\", {});\r\n    }\r\n    this.hb.into(\"#checkout-step-1\")\r\n      .then(() => this.loadJQuery());\r\n  };\r\n\r\n  resetForm() {\r\n    $('#cardNumber').val('');\r\n    $('#cardHolderName').val('');\r\n    $('.cardCvc').val('');\r\n    $('input[name=member-card]').removeAttr('checked');\r\n    $('input[id^=secure-code-member-card]').val('');\r\n    $('.div-secure-code-member-card').hide();\r\n    $('#member-card-list li').removeClass('selected-one-click-card');\r\n  };\r\n\r\n  checkIsCardSmiles(cardNumber){\r\n    return ( cardNumber.indexOf('542661') === 0 || cardNumber.indexOf('545053') === 0\r\n          || cardNumber.indexOf('514895') === 0 || cardNumber.indexOf('510147') === 0\r\n          || cardNumber.indexOf('512427') === 0 || cardNumber.indexOf('514911') === 0 )\r\n  }\r\n\r\n  // input: credit card number (full or partial)\r\n  // output: credit card brand (or false for unknown)\r\n  detectCardType(number) {\r\n    let result = CreditCardType(number);\r\n    if(result.length != 1) return false;\r\n    let cc = result[0];\r\n    let brand = cc.type;\r\n    if(brand == \"mastercard\") {\r\n      brand = this.checkIsCardSmiles(number) ? \"mastercard_smiles\" : brand;\r\n    }\r\n    return brand;\r\n  }\r\n\r\n  loadJQuery() {\r\n    var formService = new FormService();\r\n    formService.setCardNumber('#cardNumber');\r\n    $('#back-to-member-card-list').on('click', () => {\r\n      this.resetForm();\r\n      var CreditCardList = require(\"./credit-card-list\");\r\n      new CreditCardList().load();\r\n    });\r\n    $('#cardNumber').on('keyup', (evt) => {\r\n      let elem = \"#\" + evt.target.id;\r\n      let val = $(elem).val();\r\n      let brand = this.detectCardType(val);\r\n      $('#smls-card-icon').attr('class', 'cards');\r\n      if( brand !== false ) {\r\n        $('#smls-card-icon').addClass(brand);\r\n      }\r\n    });\r\n  };\r\n\r\n};\r\n","var $ = require(\"jquery\");\r\n\r\nvar SmilesServer = require(\"../services/smiles-server\");\r\nvar HandlebarLoader = require(\"../services/handlebar-loader\");\r\n\r\n//var Installments = require(\"./installments.js\");\r\n\r\nvar CreditCardListInstance = null;\r\nmodule.exports = class CreditCardList {\r\n  constructor() {\r\n    if(CreditCardListInstance) return CreditCardListInstance;\r\n    this.creditCardList = [];\r\n    this.hb = null;\r\n    CreditCardListInstance = this;\r\n  };\r\n\r\n  load() {\r\n    if(this.creditCardList.lenght > 0) this.loadTemplate();\r\n    else this.reload();\r\n  };\r\n\r\n  processCreditCard(cc) {\r\n    return {\r\n      id: cc.id,\r\n      brand: cc.brand.toLowerCase(),\r\n      last4: String(cc.number).substr(-4),\r\n      active: (cc.main == true)\r\n    };\r\n  };\r\n  refreshCreditCards() {\r\n    let server = new SmilesServer();\r\n    return server.getUserInfo()\r\n      .then((data) => {\r\n        this.creditCardList = data.savedCreditCards.map(this.processCreditCard);\r\n      });\r\n  };\r\n  reload() {\r\n    this.refreshCreditCards().then(() => this.loadTemplate());\r\n  };\r\n\r\n  loadTemplate() {\r\n    if(this.hb == null) {\r\n      this.hb = new HandlebarLoader()\r\n        .loadTemplate(\"sections/credit-card-list\", { cards: this.creditCardList });\r\n    }\r\n    this.hb.into(\"#checkout-step-1\")\r\n      .then(() => this.loadJQuery());\r\n  };\r\n\r\n  selectCard(brand) {\r\n    console.info(\"selected: \", brand);\r\n//    new Installments().selectBrand(brand);\r\n  };\r\n\r\n  loadJQuery() {\r\n    $('input[name=member-card]').on('click', (evt) => {\r\n      let elem = \"#\" + evt.target.id;\r\n      let index = $(elem).data('index');\r\n      let brand = $(elem).data('brand');\r\n      $('.div-secure-code-member-card').hide();\r\n      $('#member-card-list li').removeClass('selected-one-click-card');\r\n      $(elem).closest('li').addClass('selected-one-click-card');\r\n      $('input[id^=secure-code-member-card]').val('');\r\n      if($(elem).is(':checked')){\r\n        $('#div-secure-code-member-card-' + index).show();\r\n      }\r\n      $(elem).closest('li').addClass('selected-one-click-card');\r\n      this.selectCard(brand);\r\n    });\r\n\r\n    $(\"#other-credit-card\").on('click', () => {\r\n      var AddCreditCard = require(\"./credit-card-form\");\r\n      new AddCreditCard().load()\r\n    });\r\n  };\r\n\r\n};\r\n","var HandlebarLoader = require(\"./services/handlebar-loader\");\r\n\r\nvar CreditCardList = require(\"./controllers/credit-card-list\");\r\n/*\r\nvar AddCreditCard = require(\"./controllers/add-credit-card\");\r\nvar Installment = require(\"./controllers/installments\");\r\n*/\r\n\r\n$(document).ready(() => {\r\n  let loader = new HandlebarLoader();\r\n  loader.loadTemplate(\"checkout\")\r\n    .into(\"#checkout-token-portlet\")\r\n    .then(() => {\r\n      // step 1:\r\n      new CreditCardList().load();\r\n      // step 2:\r\n//      new Installment().load();\r\n    });\r\n\r\n});\r\n","require(\"./load.js\");\r\n","var $ = require(\"jquery\");\r\n\r\nmodule.exports = class FormService {\r\n  constructor() { }\r\n\r\n  setNumberOnly(inputId) {\r\n    $(inputId).on('keydown', (evt) => {\r\n      var key = (evt.which) ? evt.which : event.keyCode\r\n      if( key >= 48 && key <= 57 || // numbers\r\n          key >= 96 && key <= 105 || // Numeric keypad\r\n          key == 8 || key == 9 || key == 13 || // Backspace and Tab and Enter\r\n          key == 35 || key == 36 || // Home and End\r\n          key == 37 || key == 39 || // left and right arrows\r\n          key == 46 || key == 45 // Del and Ins\r\n        ) return true;\r\n      else return false;\r\n    });\r\n  }\r\n\r\n  setCardNumber(inputId) {\r\n    this.setNumberOnly(inputId);\r\n    $(inputId).on('blur', () => {\r\n      $(inputId).attr('maxlength','19');\r\n      var cardNumber = $(inputId).val();\r\n      cardNumber = cardNumber.toString().replace(/[^0-9]/g, '');\r\n      if(cardNumber.length === 15){\r\n        cardNumber = cardNumber.toString().replace(/\\D/g,\"\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{4})(\\d)/,\"$1 $2\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{6})(\\d)/,\"$1 $2\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{6})(\\d)/,\"$1 $2\");\r\n        $(\".cardCVC\").attr('maxlength','4');\r\n      } else {\r\n        cardNumber = cardNumber.toString().replace(/\\D/g,\"\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{4})(\\d)/,\"$1 $2\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{4})(\\d)/,\"$1 $2\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{4})(\\d)/,\"$1 $2\");\r\n        cardNumber = cardNumber.toString().replace(/(\\d{4})(\\d)/,\"$1 $2\");\r\n        $(\".cardCVC\").attr('maxlength','3');\r\n      }\r\n      $(inputId).val(cardNumber);\r\n    });\r\n    $(inputId).on('focus', () => {\r\n      $(inputId).attr('maxlength','16');\r\n      var cardNumber = $(inputId).val();\r\n      cardNumber = cardNumber.toString().replace(/[^0-9]/g, '');\r\n      $(inputId).val(cardNumber);\r\n    });\r\n  }\r\n\r\n};\r\n","var $ = require(\"jquery\");\r\nvar Handlebars = require(\"../libs\").Handlebars;\r\n\r\nclass hbTemplate {\r\n  constructor(tname, data) {\r\n    this.name = tname;\r\n    this.data = data;\r\n    this.promise = null;\r\n    this.html = null;\r\n  }\r\n\r\n  start(p) {\r\n    this.promise = p;\r\n  };\r\n  getHtml(fn) { return this.promise.then(fn); };\r\n  append(div) { \r\n    return this.getHtml( h => $(div).append(h) ); \r\n  };\r\n  into (div) { \r\n    return this.getHtml( h => $(div).html(h) ); \r\n  };\r\n\r\n};\r\n\r\nvar HandlebarsInstance = null;\r\nmodule.exports = class HandlebarLoader {\r\n  constructor() {\r\n    if(HandlebarsInstance) return HandlebarsInstance;\r\n    this.templateLocal = \"../src/templates/\";\r\n    this.templateName;\r\n    this.handlebars = Handlebars;\r\n    HandlebarsInstance = this;\r\n  }\r\n\r\n  getTemplateFile(name) {\r\n    return this.templateLocal + name + \".hbs\";\r\n  };\r\n\r\n  createHbTemplate(t, data) {\r\n    return new hbTemplate(t, data);\r\n  }\r\n\r\n  loadTemplate(t, data) {\r\n    let templateObj = this.createHbTemplate(t, data);\r\n    templateObj.start(\r\n      new Promise((resolve, reject) => {\r\n        var xhttp = new XMLHttpRequest();\r\n        let templateFile = this.getTemplateFile(t);\r\n        xhttp.onreadystatechange = () => {\r\n          if(xhttp.readyState == 4) {\r\n            if (xhttp.status == 200) {\r\n              console.info(\"loaded template: \" + templateFile, data);\r\n              let templateScript = this.handlebars.compile(xhttp.responseText);\r\n              let html = templateScript(data);\r\n              resolve(html);\r\n            } else {\r\n              console.info(xhttp);\r\n              reject({\r\n                code: xhttp.status,\r\n                message: xhttp.statusText\r\n              });\r\n            }\r\n          }\r\n        };\r\n        xhttp.open(\"GET\", templateFile, true);\r\n        xhttp.send();\r\n      })\r\n    );\r\n    return templateObj;\r\n  };\r\n\r\n};\r\n","var $ = require(\"jquery\");\r\n\r\nmodule.exports = class SmilesServer {\r\n  constructor() {\r\n    this.host = \"http://localhost.smiles.com.br:8888\";\r\n    this.timeoutTime = 30000;\r\n    this.checkoutToken = \"\";\r\n  }\r\n\r\n  getHeaders () {\r\n    return {\r\n      \"Authorization\": \"Bearer \" + this.checkoutToken,\r\n      \"Channel\": \"APP\",\r\n      \"Content-Type\": \"application/json\"\r\n    };\r\n  }\r\n\r\n  get(url) {\r\n//    console.info(\"server-get: \" + url);\r\n    var defer = new Promise( (resolve, reject) => {\r\n      $.ajax({\r\n        url: url,\r\n        type: \"GET\",\r\n        dataType: \"json\",\r\n        headers: this.getHeaders(),\r\n        timeout: this.timeoutTime,\r\n        success: (data) => resolve(data),\r\n        error: (data) => reject(data)\r\n      });\r\n    });\r\n    return defer;\r\n  };\r\n  post (url, data) {\r\n//    console.info(\"server-post: \" + url, data);\r\n    var defer = new Promise( (resolve, reject) => {\r\n      $.ajax({\r\n        url: url,\r\n        type: \"POST\",\r\n        data: data,\r\n        dataType: \"json\",\r\n        headers: this.getHeaders(),\r\n        timeout: this.timeoutTime,\r\n        success: (data) => resolve(data),\r\n        error: (data) => reject(data)\r\n      });\r\n    });\r\n    return defer;\r\n  };\r\n\r\n  getTokenInfo() {\r\n    let url = this.host + \"/api/oauth/tokeninfo\";\r\n    let defer = new Promise((resolve, reject) => {\r\n      this.get(url)\r\n        .then((data) => {\r\n          resolve(data);\r\n        })\r\n        .catch((err) => reject(err));\r\n    });\r\n    return defer;\r\n  };\r\n  getCheckout() {\r\n    let url = this.host + \"/api/checkout\";\r\n    return this.get(url);\r\n  };\r\n  getUserInfo() {\r\n    let url = this.host + \"/api/user\";\r\n//    return this.get(url);\r\n    return this.fakeCreditCards();\r\n  };\r\n\r\n  fakeCreditCards() {\r\n    return new Promise((resolve, reject) => {\r\n      let ccs = {\r\n        memberNumber: 7777,\r\n        savedCreditCards: [\r\n          {\r\n            id: 1,\r\n            brand: \"VISA\",\r\n            number: \"3015336500590223\",\r\n            main: true\r\n          }, {\r\n            id: 42,\r\n            brand: \"MASTERCARD\",\r\n            number: \"8315179137951987\",\r\n            main: false\r\n          }   \r\n        ]\r\n      };\r\n      resolve(ccs);\r\n    });\r\n  }\r\n\r\n};\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvY3JlZGl0LWNhcmQtdHlwZS9pbmRleC5qcyIsInNyYy9qcy9jb250cm9sbGVycy9jcmVkaXQtY2FyZC1mb3JtLmpzIiwic3JjL2pzL2NvbnRyb2xsZXJzL2NyZWRpdC1jYXJkLWxpc3QuanMiLCJzcmMvanMvbG9hZC5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3NlcnZpY2VzL2Zvcm0tc2VydmljZS5qcyIsInNyYy9qcy9zZXJ2aWNlcy9oYW5kbGViYXItbG9hZGVyLmpzIiwic3JjL2pzL3NlcnZpY2VzL3NtaWxlcy1zZXJ2ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FDcmNBLElBQUksSUFBSSxRQUFRLFFBQVIsQ0FBUjs7QUFFQSxJQUFJLGlCQUFpQixRQUFRLGtCQUFSLENBQXJC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YUFBTyxLQUFQO0FBQ0Q7QUF6REg7QUFBQTtBQUFBLGtDQTBEZ0I7QUFDWixVQUFJLE1BQU0sS0FBSyxJQUFMLEdBQVksZUFBdEI7QUFDQSxhQUFPLEtBQUssR0FBTCxDQUFTLEdBQVQsQ0FBUDtBQUNEO0FBN0RIO0FBQUE7QUFBQSxrQ0E4RGdCO0FBQ1osVUFBSSxNQUFNLEtBQUssSUFBTCxHQUFZLFdBQXRCO0FBQ0o7QUFDSSxhQUFPLEtBQUssZUFBTCxFQUFQO0FBQ0Q7QUFsRUg7QUFBQTtBQUFBLHNDQW9Fb0I7QUFDaEIsYUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3RDLFlBQUksTUFBTTtBQUNSLHdCQUFjLElBRE47QUFFUiw0QkFBa0IsQ0FDaEI7QUFDRSxnQkFBSSxDQUROO0FBRUUsbUJBQU8sTUFGVDtBQUdFLG9CQUFRLGtCQUhWO0FBSUUsa0JBQU07QUFKUixXQURnQixFQU1iO0FBQ0QsZ0JBQUksRUFESDtBQUVELG1CQUFPLFlBRk47QUFHRCxvQkFBUSxrQkFIUDtBQUlELGtCQUFNO0FBSkwsV0FOYTtBQUZWLFNBQVY7QUFnQkEsZ0JBQVEsR0FBUjtBQUNELE9BbEJNLENBQVA7QUFtQkQ7QUF4Rkg7O0FBQUE7QUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRlc3RPcmRlcjtcbnZhciB0eXBlcyA9IHt9O1xudmFyIGN1c3RvbUNhcmRzID0ge307XG52YXIgVklTQSA9ICd2aXNhJztcbnZhciBNQVNURVJDQVJEID0gJ21hc3RlcmNhcmQnO1xudmFyIEFNRVJJQ0FOX0VYUFJFU1MgPSAnYW1lcmljYW4tZXhwcmVzcyc7XG52YXIgRElORVJTX0NMVUIgPSAnZGluZXJzLWNsdWInO1xudmFyIERJU0NPVkVSID0gJ2Rpc2NvdmVyJztcbnZhciBFTE8gPSAnZWxvJztcbnZhciBKQ0IgPSAnamNiJztcbnZhciBVTklPTlBBWSA9ICd1bmlvbnBheSc7XG52YXIgTUFFU1RSTyA9ICdtYWVzdHJvJztcbnZhciBNSVIgPSAnbWlyJztcbnZhciBDVlYgPSAnQ1ZWJztcbnZhciBDSUQgPSAnQ0lEJztcbnZhciBDVkMgPSAnQ1ZDJztcbnZhciBDVk4gPSAnQ1ZOJztcbnZhciBDVlAyID0gJ0NWUDInO1xudmFyIENWRSA9ICdDVkUnO1xudmFyIE9SSUdJTkFMX1RFU1RfT1JERVIgPSBbXG4gIFZJU0EsXG4gIE1BU1RFUkNBUkQsXG4gIEFNRVJJQ0FOX0VYUFJFU1MsXG4gIERJTkVSU19DTFVCLFxuICBESVNDT1ZFUixcbiAgSkNCLFxuICBVTklPTlBBWSxcbiAgTUFFU1RSTyxcbiAgRUxPLFxuICBNSVJcbl07XG5cbmZ1bmN0aW9uIGNsb25lKG9yaWdpbmFsT2JqZWN0KSB7XG4gIHZhciBkdXBlO1xuXG4gIGlmICghb3JpZ2luYWxPYmplY3QpIHsgcmV0dXJuIG51bGw7IH1cblxuICBkdXBlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcmlnaW5hbE9iamVjdCkpO1xuXG4gIHJldHVybiBkdXBlO1xufVxuXG50ZXN0T3JkZXIgPSBjbG9uZShPUklHSU5BTF9URVNUX09SREVSKTtcblxudHlwZXNbVklTQV0gPSB7XG4gIG5pY2VUeXBlOiAnVmlzYScsXG4gIHR5cGU6IFZJU0EsXG4gIHBhdHRlcm5zOiBbXG4gICAgNFxuICBdLFxuICBnYXBzOiBbNCwgOCwgMTJdLFxuICBsZW5ndGhzOiBbMTYsIDE4LCAxOV0sXG4gIGNvZGU6IHtcbiAgICBuYW1lOiBDVlYsXG4gICAgc2l6ZTogM1xuICB9XG59O1xuXG50eXBlc1tNQVNURVJDQVJEXSA9IHtcbiAgbmljZVR5cGU6ICdNYXN0ZXJjYXJkJyxcbiAgdHlwZTogTUFTVEVSQ0FSRCxcbiAgcGF0dGVybnM6IFtcbiAgICBbNTEsIDU1XSxcbiAgICBbMjIyMSwgMjIyOV0sXG4gICAgWzIyMywgMjI5XSxcbiAgICBbMjMsIDI2XSxcbiAgICBbMjcwLCAyNzFdLFxuICAgIDI3MjBcbiAgXSxcbiAgZ2FwczogWzQsIDgsIDEyXSxcbiAgbGVuZ3RoczogWzE2XSxcbiAgY29kZToge1xuICAgIG5hbWU6IENWQyxcbiAgICBzaXplOiAzXG4gIH1cbn07XG5cbnR5cGVzW0FNRVJJQ0FOX0VYUFJFU1NdID0ge1xuICBuaWNlVHlwZTogJ0FtZXJpY2FuIEV4cHJlc3MnLFxuICB0eXBlOiBBTUVSSUNBTl9FWFBSRVNTLFxuICBwYXR0ZXJuczogW1xuICAgIDM0LFxuICAgIDM3XG4gIF0sXG4gIGdhcHM6IFs0LCAxMF0sXG4gIGxlbmd0aHM6IFsxNV0sXG4gIGNvZGU6IHtcbiAgICBuYW1lOiBDSUQsXG4gICAgc2l6ZTogNFxuICB9XG59O1xuXG50eXBlc1tESU5FUlNfQ0xVQl0gPSB7XG4gIG5pY2VUeXBlOiAnRGluZXJzIENsdWInLFxuICB0eXBlOiBESU5FUlNfQ0xVQixcbiAgcGF0dGVybnM6IFtcbiAgICBbMzAwLCAzMDVdLFxuICAgIDM2LFxuICAgIDM4LFxuICAgIDM5XG4gIF0sXG4gIGdhcHM6IFs0LCAxMF0sXG4gIGxlbmd0aHM6IFsxNCwgMTYsIDE5XSxcbiAgY29kZToge1xuICAgIG5hbWU6IENWVixcbiAgICBzaXplOiAzXG4gIH1cbn07XG5cbnR5cGVzW0RJU0NPVkVSXSA9IHtcbiAgbmljZVR5cGU6ICdEaXNjb3ZlcicsXG4gIHR5cGU6IERJU0NPVkVSLFxuICBwYXR0ZXJuczogW1xuICAgIDYwMTEsXG4gICAgWzY0NCwgNjQ5XSxcbiAgICA2NVxuICBdLFxuICBnYXBzOiBbNCwgOCwgMTJdLFxuICBsZW5ndGhzOiBbMTYsIDE5XSxcbiAgY29kZToge1xuICAgIG5hbWU6IENJRCxcbiAgICBzaXplOiAzXG4gIH1cbn07XG5cbnR5cGVzW0pDQl0gPSB7XG4gIG5pY2VUeXBlOiAnSkNCJyxcbiAgdHlwZTogSkNCLFxuICBwYXR0ZXJuczogW1xuICAgIDIxMzEsXG4gICAgMTgwMCxcbiAgICBbMzUyOCwgMzU4OV1cbiAgXSxcbiAgZ2FwczogWzQsIDgsIDEyXSxcbiAgbGVuZ3RoczogWzE2LCAxNywgMTgsIDE5XSxcbiAgY29kZToge1xuICAgIG5hbWU6IENWVixcbiAgICBzaXplOiAzXG4gIH1cbn07XG5cbnR5cGVzW1VOSU9OUEFZXSA9IHtcbiAgbmljZVR5cGU6ICdVbmlvblBheScsXG4gIHR5cGU6IFVOSU9OUEFZLFxuICBwYXR0ZXJuczogW1xuICAgIDYyMCxcbiAgICBbNjI0LCA2MjZdLFxuICAgIFs2MjEwMCwgNjIxODJdLFxuICAgIFs2MjE4NCwgNjIxODddLFxuICAgIFs2MjE4NSwgNjIxOTddLFxuICAgIFs2MjIwMCwgNjIyMDVdLFxuICAgIFs2MjIwMTAsIDYyMjk5OV0sXG4gICAgNjIyMDE4LFxuICAgIFs2MjIwMTksIDYyMjk5OV0sXG4gICAgWzYyMjA3LCA2MjIwOV0sXG4gICAgWzYyMjEyNiwgNjIyOTI1XSxcbiAgICBbNjIzLCA2MjZdLFxuICAgIDYyNzAsXG4gICAgNjI3MixcbiAgICA2Mjc2LFxuICAgIFs2Mjc3MDAsIDYyNzc3OV0sXG4gICAgWzYyNzc4MSwgNjI3Nzk5XSxcbiAgICBbNjI4MiwgNjI4OV0sXG4gICAgNjI5MSxcbiAgICA2MjkyXG4gIF0sXG4gIGdhcHM6IFs0LCA4LCAxMl0sXG4gIGxlbmd0aHM6IFsxNiwgMTcsIDE4LCAxOV0sXG4gIGNvZGU6IHtcbiAgICBuYW1lOiBDVk4sXG4gICAgc2l6ZTogM1xuICB9XG59O1xuXG50eXBlc1tNQUVTVFJPXSA9IHtcbiAgbmljZVR5cGU6ICdNYWVzdHJvJyxcbiAgdHlwZTogTUFFU1RSTyxcbiAgcGF0dGVybnM6IFtcbiAgICA0OTM2OTgsXG4gICAgWzUwMDAwMCwgNTA2Njk4XSxcbiAgICBbNTA2Nzc5LCA1MDg5OTldLFxuICAgIFs1NiwgNTldLFxuICAgIDYzLFxuICAgIDY3LFxuICAgIDZcbiAgXSxcbiAgZ2FwczogWzQsIDgsIDEyXSxcbiAgbGVuZ3RoczogWzEyLCAxMywgMTQsIDE1LCAxNiwgMTcsIDE4LCAxOV0sXG4gIGNvZGU6IHtcbiAgICBuYW1lOiBDVkMsXG4gICAgc2l6ZTogM1xuICB9XG59O1xuXG50eXBlc1tFTE9dID0ge1xuICBuaWNlVHlwZTogJ0VsbycsXG4gIHR5cGU6IEVMTyxcbiAgcGF0dGVybnM6IFtcbiAgICA0MDExNzgsXG4gICAgNDAxMTc5LFxuICAgIDQzODkzNSxcbiAgICA0NTc2MzEsXG4gICAgNDU3NjMyLFxuICAgIDQzMTI3NCxcbiAgICA0NTE0MTYsXG4gICAgNDU3MzkzLFxuICAgIDUwNDE3NSxcbiAgICBbNTA2Njk5LCA1MDY3NzhdLFxuICAgIFs1MDkwMDAsIDUwOTk5OV0sXG4gICAgNjI3NzgwLFxuICAgIDYzNjI5NyxcbiAgICA2MzYzNjgsXG4gICAgWzY1MDAzMSwgNjUwMDMzXSxcbiAgICBbNjUwMDM1LCA2NTAwNTFdLFxuICAgIFs2NTA0MDUsIDY1MDQzOV0sXG4gICAgWzY1MDQ4NSwgNjUwNTM4XSxcbiAgICBbNjUwNTQxLCA2NTA1OThdLFxuICAgIFs2NTA3MDAsIDY1MDcxOF0sXG4gICAgWzY1MDcyMCwgNjUwNzI3XSxcbiAgICBbNjUwOTAxLCA2NTA5NzhdLFxuICAgIFs2NTE2NTIsIDY1MTY3OV0sXG4gICAgWzY1NTAwMCwgNjU1MDE5XSxcbiAgICBbNjU1MDIxLCA2NTUwNThdXG4gIF0sXG4gIGdhcHM6IFs0LCA4LCAxMl0sXG4gIGxlbmd0aHM6IFsxNl0sXG4gIGNvZGU6IHtcbiAgICBuYW1lOiBDVkUsXG4gICAgc2l6ZTogM1xuICB9XG59O1xuXG50eXBlc1tNSVJdID0ge1xuICBuaWNlVHlwZTogJ01pcicsXG4gIHR5cGU6IE1JUixcbiAgcGF0dGVybnM6IFtcbiAgICBbMjIwMCwgMjIwNF1cbiAgXSxcbiAgZ2FwczogWzQsIDgsIDEyXSxcbiAgbGVuZ3RoczogWzE2LCAxNywgMTgsIDE5XSxcbiAgY29kZToge1xuICAgIG5hbWU6IENWUDIsXG4gICAgc2l6ZTogM1xuICB9XG59O1xuXG5mdW5jdGlvbiBmaW5kVHlwZSh0eXBlKSB7XG4gIHJldHVybiBjdXN0b21DYXJkc1t0eXBlXSB8fCB0eXBlc1t0eXBlXTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZElucHV0VHlwZShjYXJkTnVtYmVyKSB7XG4gIHJldHVybiB0eXBlb2YgY2FyZE51bWJlciA9PT0gJ3N0cmluZycgfHwgY2FyZE51bWJlciBpbnN0YW5jZW9mIFN0cmluZztcbn1cblxuZnVuY3Rpb24gaGFzRW5vdWdoUmVzdWx0c1RvRGV0ZXJtaW5lQmVzdE1hdGNoKHJlc3VsdHMpIHtcbiAgdmFyIG51bWJlck9mUmVzdWx0c1dpdGhNYXhTdHJlbmd0aFByb3BlcnR5ID0gcmVzdWx0cy5maWx0ZXIoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHJldHVybiByZXN1bHQubWF0Y2hTdHJlbmd0aDtcbiAgfSkubGVuZ3RoO1xuXG4gIC8vIGlmIGFsbCBwb3NzaWJsZSByZXN1bHRzIGhhdmUgYSBtYXhTdHJlbmd0aCBwcm9wZXJ0eVxuICAvLyB0aGF0IG1lYW5zIHRoZSBjYXJkIG51bWJlciBpcyBzdWZmaWNpZW50bHkgbG9uZ1xuICAvLyBlbm91Z2ggdG8gZGV0ZXJtaW5lIGNvbmNsdXNpdmVseSB3aGF0IHRoZSB0eXBlIGlzXG4gIHJldHVybiBudW1iZXJPZlJlc3VsdHNXaXRoTWF4U3RyZW5ndGhQcm9wZXJ0eSA+IDAgJiZcbiAgICBudW1iZXJPZlJlc3VsdHNXaXRoTWF4U3RyZW5ndGhQcm9wZXJ0eSA9PT0gcmVzdWx0cy5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGZpbmRCZXN0TWF0Y2gocmVzdWx0cykge1xuICBpZiAoIWhhc0Vub3VnaFJlc3VsdHNUb0RldGVybWluZUJlc3RNYXRjaChyZXN1bHRzKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiByZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYmVzdE1hdGNoLCByZXN1bHQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICAgIGlmICghYmVzdE1hdGNoKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIGlmIHRoZSBjdXJyZW50IGJlc3QgbWF0Y2ggcGF0dGVybiBpcyBsZXNzIHNwZWNpZmljXG4gICAgLy8gdGhhbiB0aGlzIHJlc3VsdCwgc2V0IHRoZSByZXN1bHQgYXMgdGhlIG5ldyBiZXN0IG1hdGNoXG4gICAgaWYgKGJlc3RNYXRjaC5tYXRjaFN0cmVuZ3RoIDwgcmVzdWx0Lm1hdGNoU3RyZW5ndGgpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJlc3RNYXRjaDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEFsbENhcmRUeXBlcygpIHtcbiAgcmV0dXJuIHRlc3RPcmRlci5tYXAoZnVuY3Rpb24gKHR5cGUpIHtcbiAgICByZXR1cm4gY2xvbmUoZmluZFR5cGUodHlwZSkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlZGl0Q2FyZFR5cGUoY2FyZE51bWJlcikge1xuICB2YXIgYmVzdE1hdGNoO1xuICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gIGlmICghaXNWYWxpZElucHV0VHlwZShjYXJkTnVtYmVyKSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChjYXJkTnVtYmVyLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBnZXRBbGxDYXJkVHlwZXMoKTtcbiAgfVxuXG4gIHRlc3RPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIGNhcmRDb25maWd1cmF0aW9uID0gZmluZFR5cGUodHlwZSk7XG5cbiAgICBsb29wT3ZlckNhcmRQYXR0ZXJucyhjYXJkTnVtYmVyLCBjYXJkQ29uZmlndXJhdGlvbiwgcmVzdWx0cyk7XG4gIH0pO1xuXG4gIGJlc3RNYXRjaCA9IGZpbmRCZXN0TWF0Y2gocmVzdWx0cyk7XG5cbiAgaWYgKGJlc3RNYXRjaCkge1xuICAgIHJldHVybiBbYmVzdE1hdGNoXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBsb29wT3ZlckNhcmRQYXR0ZXJucyhjYXJkTnVtYmVyLCBjYXJkQ29uZmlndXJhdGlvbiwgcmVzdWx0cykge1xuICB2YXIgaSwgcGF0dGVybiwgcGF0dGVybkxlbmd0aCwgY2xvbmVkQ2FyZENvbmZpZ3VyYXRpb247XG5cbiAgZm9yIChpID0gMDsgaSA8IGNhcmRDb25maWd1cmF0aW9uLnBhdHRlcm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgcGF0dGVybiA9IGNhcmRDb25maWd1cmF0aW9uLnBhdHRlcm5zW2ldO1xuXG4gICAgaWYgKCFtYXRjaGVzKGNhcmROdW1iZXIsIHBhdHRlcm4pKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjbG9uZWRDYXJkQ29uZmlndXJhdGlvbiA9IGNsb25lKGNhcmRDb25maWd1cmF0aW9uKTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgICBwYXR0ZXJuTGVuZ3RoID0gU3RyaW5nKHBhdHRlcm5bMF0pLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0dGVybkxlbmd0aCA9IFN0cmluZyhwYXR0ZXJuKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKGNhcmROdW1iZXIubGVuZ3RoID49IHBhdHRlcm5MZW5ndGgpIHtcbiAgICAgIGNsb25lZENhcmRDb25maWd1cmF0aW9uLm1hdGNoU3RyZW5ndGggPSBwYXR0ZXJuTGVuZ3RoO1xuICAgIH1cblxuICAgIHJlc3VsdHMucHVzaChjbG9uZWRDYXJkQ29uZmlndXJhdGlvbik7XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF0Y2hlcyhjYXJkTnVtYmVyLCBwYXR0ZXJuKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgcmV0dXJuIG1hdGNoZXNSYW5nZShjYXJkTnVtYmVyLCBwYXR0ZXJuWzBdLCBwYXR0ZXJuWzFdKTtcbiAgfVxuXG4gIHJldHVybiBtYXRjaGVzUGF0dGVybihjYXJkTnVtYmVyLCBwYXR0ZXJuKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlc1BhdHRlcm4oY2FyZE51bWJlciwgcGF0dGVybikge1xuICBwYXR0ZXJuID0gU3RyaW5nKHBhdHRlcm4pO1xuXG4gIHJldHVybiBwYXR0ZXJuLnN1YnN0cmluZygwLCBjYXJkTnVtYmVyLmxlbmd0aCkgPT09IGNhcmROdW1iZXIuc3Vic3RyaW5nKDAsIHBhdHRlcm4ubGVuZ3RoKTtcbn1cblxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9wb2x2by1sYWJzL2NhcmQtdHlwZS9ibG9iL2FhYWIxMWY4MGZhMTkzOWJjY2M4ZjI0OTA1YTA2YWUzY2Q4NjQzNTYvc3JjL2NhcmRUeXBlLmpzI0wzNy1MNDJcbmZ1bmN0aW9uIG1hdGNoZXNSYW5nZShjYXJkTnVtYmVyLCBtaW4sIG1heCkge1xuICB2YXIgbWF4TGVuZ3RoVG9DaGVjayA9IFN0cmluZyhtaW4pLmxlbmd0aDtcbiAgdmFyIHN1YnN0ciA9IGNhcmROdW1iZXIuc3Vic3RyKDAsIG1heExlbmd0aFRvQ2hlY2spO1xuICB2YXIgaW50ZWdlclJlcHJlc2VudGF0aW9uT2ZDYXJkTnVtYmVyID0gcGFyc2VJbnQoc3Vic3RyLCAxMCk7XG5cbiAgbWluID0gcGFyc2VJbnQoU3RyaW5nKG1pbikuc3Vic3RyKDAsIHN1YnN0ci5sZW5ndGgpLCAxMCk7XG4gIG1heCA9IHBhcnNlSW50KFN0cmluZyhtYXgpLnN1YnN0cigwLCBzdWJzdHIubGVuZ3RoKSwgMTApO1xuXG4gIHJldHVybiBpbnRlZ2VyUmVwcmVzZW50YXRpb25PZkNhcmROdW1iZXIgPj0gbWluICYmIGludGVnZXJSZXByZXNlbnRhdGlvbk9mQ2FyZE51bWJlciA8PSBtYXg7XG59XG5cbmNyZWRpdENhcmRUeXBlLmdldFR5cGVJbmZvID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgcmV0dXJuIGNsb25lKGZpbmRUeXBlKHR5cGUpKTtcbn07XG5cbmZ1bmN0aW9uIGdldENhcmRQb3NpdGlvbihuYW1lLCBpZ25vcmVFcnJvckZvck5vdEV4aXN0aW5nKSB7XG4gIHZhciBwb3NpdGlvbiA9IHRlc3RPcmRlci5pbmRleE9mKG5hbWUpO1xuXG4gIGlmICghaWdub3JlRXJyb3JGb3JOb3RFeGlzdGluZyAmJiBwb3NpdGlvbiA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiJyArIG5hbWUgKyAnXCIgaXMgbm90IGEgc3VwcG9ydGVkIGNhcmQgdHlwZS4nKTtcbiAgfVxuXG4gIHJldHVybiBwb3NpdGlvbjtcbn1cblxuY3JlZGl0Q2FyZFR5cGUucmVtb3ZlQ2FyZCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gIHZhciBwb3NpdGlvbiA9IGdldENhcmRQb3NpdGlvbihuYW1lKTtcblxuICB0ZXN0T3JkZXIuc3BsaWNlKHBvc2l0aW9uLCAxKTtcbn07XG5cbmNyZWRpdENhcmRUeXBlLmFkZENhcmQgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gIHZhciBleGlzdGluZ0NhcmRQb3NpdGlvbiA9IGdldENhcmRQb3NpdGlvbihjb25maWcudHlwZSwgdHJ1ZSk7XG5cbiAgY3VzdG9tQ2FyZHNbY29uZmlnLnR5cGVdID0gY29uZmlnO1xuXG4gIGlmIChleGlzdGluZ0NhcmRQb3NpdGlvbiA9PT0gLTEpIHtcbiAgICB0ZXN0T3JkZXIucHVzaChjb25maWcudHlwZSk7XG4gIH1cbn07XG5cbmNyZWRpdENhcmRUeXBlLnVwZGF0ZUNhcmQgPSBmdW5jdGlvbiAoY2FyZFR5cGUsIHVwZGF0ZXMpIHtcbiAgdmFyIGNsb25lZENhcmQ7XG4gIHZhciBvcmlnaW5hbE9iamVjdCA9IGN1c3RvbUNhcmRzW2NhcmRUeXBlXSB8fCB0eXBlc1tjYXJkVHlwZV07XG5cbiAgaWYgKCFvcmlnaW5hbE9iamVjdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignXCInICsgY2FyZFR5cGUgKyAnXCIgaXMgbm90IGEgcmVjb2duaXplZCB0eXBlLiBVc2UgYGFkZENhcmRgIGluc3RlYWQuJyk7XG4gIH1cblxuICBpZiAodXBkYXRlcy50eXBlICYmIG9yaWdpbmFsT2JqZWN0LnR5cGUgIT09IHVwZGF0ZXMudHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IG92ZXJ3cml0ZSB0eXBlIHBhcmFtZXRlci4nKTtcbiAgfVxuXG4gIGNsb25lZENhcmQgPSBjbG9uZShvcmlnaW5hbE9iamVjdCwgdHJ1ZSk7XG5cbiAgT2JqZWN0LmtleXMoY2xvbmVkQ2FyZCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKHVwZGF0ZXNba2V5XSkge1xuICAgICAgY2xvbmVkQ2FyZFtrZXldID0gdXBkYXRlc1trZXldO1xuICAgIH1cbiAgfSk7XG5cbiAgY3VzdG9tQ2FyZHNbY2xvbmVkQ2FyZC50eXBlXSA9IGNsb25lZENhcmQ7XG59O1xuXG5jcmVkaXRDYXJkVHlwZS5jaGFuZ2VPcmRlciA9IGZ1bmN0aW9uIChuYW1lLCBwb3NpdGlvbikge1xuICB2YXIgY3VycmVudFBvc2l0aW9uID0gZ2V0Q2FyZFBvc2l0aW9uKG5hbWUpO1xuXG4gIHRlc3RPcmRlci5zcGxpY2UoY3VycmVudFBvc2l0aW9uLCAxKTtcbiAgdGVzdE9yZGVyLnNwbGljZShwb3NpdGlvbiwgMCwgbmFtZSk7XG59O1xuXG5jcmVkaXRDYXJkVHlwZS5yZXNldE1vZGlmaWNhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIHRlc3RPcmRlciA9IGNsb25lKE9SSUdJTkFMX1RFU1RfT1JERVIpO1xuICBjdXN0b21DYXJkcyA9IHt9O1xufTtcblxuY3JlZGl0Q2FyZFR5cGUudHlwZXMgPSB7XG4gIFZJU0E6IFZJU0EsXG4gIE1BU1RFUkNBUkQ6IE1BU1RFUkNBUkQsXG4gIEFNRVJJQ0FOX0VYUFJFU1M6IEFNRVJJQ0FOX0VYUFJFU1MsXG4gIERJTkVSU19DTFVCOiBESU5FUlNfQ0xVQixcbiAgRElTQ09WRVI6IERJU0NPVkVSLFxuICBKQ0I6IEpDQixcbiAgVU5JT05QQVk6IFVOSU9OUEFZLFxuICBNQUVTVFJPOiBNQUVTVFJPLFxuICBFTE86IEVMTyxcbiAgTUlSOiBNSVJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlZGl0Q2FyZFR5cGU7XG4iLCJ2YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XHJcblxyXG52YXIgQ3JlZGl0Q2FyZFR5cGUgPSByZXF1aXJlKCdjcmVkaXQtY2FyZC10eXBlJyk7XHJcblxyXG52YXIgRm9ybVNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvZm9ybS1zZXJ2aWNlLmpzXCIpO1xyXG52YXIgSGFuZGxlYmFyTG9hZGVyID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2hhbmRsZWJhci1sb2FkZXJcIik7XHJcbnZhciBTbWlsZXNTZXJ2ZXIgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvc21pbGVzLXNlcnZlclwiKTtcclxuXHJcbnZhciBDcmVkaXRDYXJkRm9ybUluc3RhbmNlID0gbnVsbDtcclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBDcmVkaXRDYXJkRm9ybSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBpZihDcmVkaXRDYXJkRm9ybUluc3RhbmNlKSByZXR1cm4gQ3JlZGl0Q2FyZEZvcm1JbnN0YW5jZTtcclxuICAgIHRoaXMuaGIgPSBudWxsO1xyXG4gICAgQ3JlZGl0Q2FyZEZvcm1JbnN0YW5jZSA9IHRoaXM7XHJcbiAgfTtcclxuXHJcbiAgbG9hZCgpe1xyXG4gICAgaWYodGhpcy5oYiA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuaGIgPSBuZXcgSGFuZGxlYmFyTG9hZGVyKClcclxuICAgICAgICAubG9hZFRlbXBsYXRlKFwic2VjdGlvbnMvY3JlZGl0LWNhcmQtZm9ybVwiLCB7fSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmhiLmludG8oXCIjY2hlY2tvdXQtc3RlcC0xXCIpXHJcbiAgICAgIC50aGVuKCgpID0+IHRoaXMubG9hZEpRdWVyeSgpKTtcclxuICB9O1xyXG5cclxuICByZXNldEZvcm0oKSB7XHJcbiAgICAkKCcjY2FyZE51bWJlcicpLnZhbCgnJyk7XHJcbiAgICAkKCcjY2FyZEhvbGRlck5hbWUnKS52YWwoJycpO1xyXG4gICAgJCgnLmNhcmRDdmMnKS52YWwoJycpO1xyXG4gICAgJCgnaW5wdXRbbmFtZT1tZW1iZXItY2FyZF0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAkKCdpbnB1dFtpZF49c2VjdXJlLWNvZGUtbWVtYmVyLWNhcmRdJykudmFsKCcnKTtcclxuICAgICQoJy5kaXYtc2VjdXJlLWNvZGUtbWVtYmVyLWNhcmQnKS5oaWRlKCk7XHJcbiAgICAkKCcjbWVtYmVyLWNhcmQtbGlzdCBsaScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZC1vbmUtY2xpY2stY2FyZCcpO1xyXG4gIH07XHJcblxyXG4gIGNoZWNrSXNDYXJkU21pbGVzKGNhcmROdW1iZXIpe1xyXG4gICAgcmV0dXJuICggY2FyZE51bWJlci5pbmRleE9mKCc1NDI2NjEnKSA9PT0gMCB8fCBjYXJkTnVtYmVyLmluZGV4T2YoJzU0NTA1MycpID09PSAwXHJcbiAgICAgICAgICB8fCBjYXJkTnVtYmVyLmluZGV4T2YoJzUxNDg5NScpID09PSAwIHx8IGNhcmROdW1iZXIuaW5kZXhPZignNTEwMTQ3JykgPT09IDBcclxuICAgICAgICAgIHx8IGNhcmROdW1iZXIuaW5kZXhPZignNTEyNDI3JykgPT09IDAgfHwgY2FyZE51bWJlci5pbmRleE9mKCc1MTQ5MTEnKSA9PT0gMCApXHJcbiAgfVxyXG5cclxuICAvLyBpbnB1dDogY3JlZGl0IGNhcmQgbnVtYmVyIChmdWxsIG9yIHBhcnRpYWwpXHJcbiAgLy8gb3V0cHV0OiBjcmVkaXQgY2FyZCBicmFuZCAob3IgZmFsc2UgZm9yIHVua25vd24pXHJcbiAgZGV0ZWN0Q2FyZFR5cGUobnVtYmVyKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gQ3JlZGl0Q2FyZFR5cGUobnVtYmVyKTtcclxuICAgIGlmKHJlc3VsdC5sZW5ndGggIT0gMSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgbGV0IGNjID0gcmVzdWx0WzBdO1xyXG4gICAgbGV0IGJyYW5kID0gY2MudHlwZTtcclxuICAgIGlmKGJyYW5kID09IFwibWFzdGVyY2FyZFwiKSB7XHJcbiAgICAgIGJyYW5kID0gdGhpcy5jaGVja0lzQ2FyZFNtaWxlcyhudW1iZXIpID8gXCJtYXN0ZXJjYXJkX3NtaWxlc1wiIDogYnJhbmQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnJhbmQ7XHJcbiAgfVxyXG5cclxuICBsb2FkSlF1ZXJ5KCkge1xyXG4gICAgdmFyIGZvcm1TZXJ2aWNlID0gbmV3IEZvcm1TZXJ2aWNlKCk7XHJcbiAgICBmb3JtU2VydmljZS5zZXRDYXJkTnVtYmVyKCcjY2FyZE51bWJlcicpO1xyXG4gICAgJCgnI2JhY2stdG8tbWVtYmVyLWNhcmQtbGlzdCcpLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5yZXNldEZvcm0oKTtcclxuICAgICAgdmFyIENyZWRpdENhcmRMaXN0ID0gcmVxdWlyZShcIi4vY3JlZGl0LWNhcmQtbGlzdFwiKTtcclxuICAgICAgbmV3IENyZWRpdENhcmRMaXN0KCkubG9hZCgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcjY2FyZE51bWJlcicpLm9uKCdrZXl1cCcsIChldnQpID0+IHtcclxuICAgICAgbGV0IGVsZW0gPSBcIiNcIiArIGV2dC50YXJnZXQuaWQ7XHJcbiAgICAgIGxldCB2YWwgPSAkKGVsZW0pLnZhbCgpO1xyXG4gICAgICBsZXQgYnJhbmQgPSB0aGlzLmRldGVjdENhcmRUeXBlKHZhbCk7XHJcbiAgICAgICQoJyNzbWxzLWNhcmQtaWNvbicpLmF0dHIoJ2NsYXNzJywgJ2NhcmRzJyk7XHJcbiAgICAgIGlmKCBicmFuZCAhPT0gZmFsc2UgKSB7XHJcbiAgICAgICAgJCgnI3NtbHMtY2FyZC1pY29uJykuYWRkQ2xhc3MoYnJhbmQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxufTtcclxuIiwidmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xyXG5cclxudmFyIFNtaWxlc1NlcnZlciA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9zbWlsZXMtc2VydmVyXCIpO1xyXG52YXIgSGFuZGxlYmFyTG9hZGVyID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL2hhbmRsZWJhci1sb2FkZXJcIik7XHJcblxyXG4vL3ZhciBJbnN0YWxsbWVudHMgPSByZXF1aXJlKFwiLi9pbnN0YWxsbWVudHMuanNcIik7XHJcblxyXG52YXIgQ3JlZGl0Q2FyZExpc3RJbnN0YW5jZSA9IG51bGw7XHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQ3JlZGl0Q2FyZExpc3Qge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgaWYoQ3JlZGl0Q2FyZExpc3RJbnN0YW5jZSkgcmV0dXJuIENyZWRpdENhcmRMaXN0SW5zdGFuY2U7XHJcbiAgICB0aGlzLmNyZWRpdENhcmRMaXN0ID0gW107XHJcbiAgICB0aGlzLmhiID0gbnVsbDtcclxuICAgIENyZWRpdENhcmRMaXN0SW5zdGFuY2UgPSB0aGlzO1xyXG4gIH07XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICBpZih0aGlzLmNyZWRpdENhcmRMaXN0LmxlbmdodCA+IDApIHRoaXMubG9hZFRlbXBsYXRlKCk7XHJcbiAgICBlbHNlIHRoaXMucmVsb2FkKCk7XHJcbiAgfTtcclxuXHJcbiAgcHJvY2Vzc0NyZWRpdENhcmQoY2MpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBjYy5pZCxcclxuICAgICAgYnJhbmQ6IGNjLmJyYW5kLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgIGxhc3Q0OiBTdHJpbmcoY2MubnVtYmVyKS5zdWJzdHIoLTQpLFxyXG4gICAgICBhY3RpdmU6IChjYy5tYWluID09IHRydWUpXHJcbiAgICB9O1xyXG4gIH07XHJcbiAgcmVmcmVzaENyZWRpdENhcmRzKCkge1xyXG4gICAgbGV0IHNlcnZlciA9IG5ldyBTbWlsZXNTZXJ2ZXIoKTtcclxuICAgIHJldHVybiBzZXJ2ZXIuZ2V0VXNlckluZm8oKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHRoaXMuY3JlZGl0Q2FyZExpc3QgPSBkYXRhLnNhdmVkQ3JlZGl0Q2FyZHMubWFwKHRoaXMucHJvY2Vzc0NyZWRpdENhcmQpO1xyXG4gICAgICB9KTtcclxuICB9O1xyXG4gIHJlbG9hZCgpIHtcclxuICAgIHRoaXMucmVmcmVzaENyZWRpdENhcmRzKCkudGhlbigoKSA9PiB0aGlzLmxvYWRUZW1wbGF0ZSgpKTtcclxuICB9O1xyXG5cclxuICBsb2FkVGVtcGxhdGUoKSB7XHJcbiAgICBpZih0aGlzLmhiID09IG51bGwpIHtcclxuICAgICAgdGhpcy5oYiA9IG5ldyBIYW5kbGViYXJMb2FkZXIoKVxyXG4gICAgICAgIC5sb2FkVGVtcGxhdGUoXCJzZWN0aW9ucy9jcmVkaXQtY2FyZC1saXN0XCIsIHsgY2FyZHM6IHRoaXMuY3JlZGl0Q2FyZExpc3QgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmhiLmludG8oXCIjY2hlY2tvdXQtc3RlcC0xXCIpXHJcbiAgICAgIC50aGVuKCgpID0+IHRoaXMubG9hZEpRdWVyeSgpKTtcclxuICB9O1xyXG5cclxuICBzZWxlY3RDYXJkKGJyYW5kKSB7XHJcbiAgICBjb25zb2xlLmluZm8oXCJzZWxlY3RlZDogXCIsIGJyYW5kKTtcclxuLy8gICAgbmV3IEluc3RhbGxtZW50cygpLnNlbGVjdEJyYW5kKGJyYW5kKTtcclxuICB9O1xyXG5cclxuICBsb2FkSlF1ZXJ5KCkge1xyXG4gICAgJCgnaW5wdXRbbmFtZT1tZW1iZXItY2FyZF0nKS5vbignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGxldCBlbGVtID0gXCIjXCIgKyBldnQudGFyZ2V0LmlkO1xyXG4gICAgICBsZXQgaW5kZXggPSAkKGVsZW0pLmRhdGEoJ2luZGV4Jyk7XHJcbiAgICAgIGxldCBicmFuZCA9ICQoZWxlbSkuZGF0YSgnYnJhbmQnKTtcclxuICAgICAgJCgnLmRpdi1zZWN1cmUtY29kZS1tZW1iZXItY2FyZCcpLmhpZGUoKTtcclxuICAgICAgJCgnI21lbWJlci1jYXJkLWxpc3QgbGknKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQtb25lLWNsaWNrLWNhcmQnKTtcclxuICAgICAgJChlbGVtKS5jbG9zZXN0KCdsaScpLmFkZENsYXNzKCdzZWxlY3RlZC1vbmUtY2xpY2stY2FyZCcpO1xyXG4gICAgICAkKCdpbnB1dFtpZF49c2VjdXJlLWNvZGUtbWVtYmVyLWNhcmRdJykudmFsKCcnKTtcclxuICAgICAgaWYoJChlbGVtKS5pcygnOmNoZWNrZWQnKSl7XHJcbiAgICAgICAgJCgnI2Rpdi1zZWN1cmUtY29kZS1tZW1iZXItY2FyZC0nICsgaW5kZXgpLnNob3coKTtcclxuICAgICAgfVxyXG4gICAgICAkKGVsZW0pLmNsb3Nlc3QoJ2xpJykuYWRkQ2xhc3MoJ3NlbGVjdGVkLW9uZS1jbGljay1jYXJkJyk7XHJcbiAgICAgIHRoaXMuc2VsZWN0Q2FyZChicmFuZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI290aGVyLWNyZWRpdC1jYXJkXCIpLm9uKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdmFyIEFkZENyZWRpdENhcmQgPSByZXF1aXJlKFwiLi9jcmVkaXQtY2FyZC1mb3JtXCIpO1xyXG4gICAgICBuZXcgQWRkQ3JlZGl0Q2FyZCgpLmxvYWQoKVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbn07XHJcbiIsInZhciBIYW5kbGViYXJMb2FkZXIgPSByZXF1aXJlKFwiLi9zZXJ2aWNlcy9oYW5kbGViYXItbG9hZGVyXCIpO1xyXG5cclxudmFyIENyZWRpdENhcmRMaXN0ID0gcmVxdWlyZShcIi4vY29udHJvbGxlcnMvY3JlZGl0LWNhcmQtbGlzdFwiKTtcclxuLypcclxudmFyIEFkZENyZWRpdENhcmQgPSByZXF1aXJlKFwiLi9jb250cm9sbGVycy9hZGQtY3JlZGl0LWNhcmRcIik7XHJcbnZhciBJbnN0YWxsbWVudCA9IHJlcXVpcmUoXCIuL2NvbnRyb2xsZXJzL2luc3RhbGxtZW50c1wiKTtcclxuKi9cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcclxuICBsZXQgbG9hZGVyID0gbmV3IEhhbmRsZWJhckxvYWRlcigpO1xyXG4gIGxvYWRlci5sb2FkVGVtcGxhdGUoXCJjaGVja291dFwiKVxyXG4gICAgLmludG8oXCIjY2hlY2tvdXQtdG9rZW4tcG9ydGxldFwiKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAvLyBzdGVwIDE6XHJcbiAgICAgIG5ldyBDcmVkaXRDYXJkTGlzdCgpLmxvYWQoKTtcclxuICAgICAgLy8gc3RlcCAyOlxyXG4vLyAgICAgIG5ldyBJbnN0YWxsbWVudCgpLmxvYWQoKTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcbiIsInJlcXVpcmUoXCIuL2xvYWQuanNcIik7XHJcbiIsInZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgRm9ybVNlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gIHNldE51bWJlck9ubHkoaW5wdXRJZCkge1xyXG4gICAgJChpbnB1dElkKS5vbigna2V5ZG93bicsIChldnQpID0+IHtcclxuICAgICAgdmFyIGtleSA9IChldnQud2hpY2gpID8gZXZ0LndoaWNoIDogZXZlbnQua2V5Q29kZVxyXG4gICAgICBpZigga2V5ID49IDQ4ICYmIGtleSA8PSA1NyB8fCAvLyBudW1iZXJzXHJcbiAgICAgICAgICBrZXkgPj0gOTYgJiYga2V5IDw9IDEwNSB8fCAvLyBOdW1lcmljIGtleXBhZFxyXG4gICAgICAgICAga2V5ID09IDggfHwga2V5ID09IDkgfHwga2V5ID09IDEzIHx8IC8vIEJhY2tzcGFjZSBhbmQgVGFiIGFuZCBFbnRlclxyXG4gICAgICAgICAga2V5ID09IDM1IHx8IGtleSA9PSAzNiB8fCAvLyBIb21lIGFuZCBFbmRcclxuICAgICAgICAgIGtleSA9PSAzNyB8fCBrZXkgPT0gMzkgfHwgLy8gbGVmdCBhbmQgcmlnaHQgYXJyb3dzXHJcbiAgICAgICAgICBrZXkgPT0gNDYgfHwga2V5ID09IDQ1IC8vIERlbCBhbmQgSW5zXHJcbiAgICAgICAgKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldENhcmROdW1iZXIoaW5wdXRJZCkge1xyXG4gICAgdGhpcy5zZXROdW1iZXJPbmx5KGlucHV0SWQpO1xyXG4gICAgJChpbnB1dElkKS5vbignYmx1cicsICgpID0+IHtcclxuICAgICAgJChpbnB1dElkKS5hdHRyKCdtYXhsZW5ndGgnLCcxOScpO1xyXG4gICAgICB2YXIgY2FyZE51bWJlciA9ICQoaW5wdXRJZCkudmFsKCk7XHJcbiAgICAgIGNhcmROdW1iZXIgPSBjYXJkTnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvW14wLTldL2csICcnKTtcclxuICAgICAgaWYoY2FyZE51bWJlci5sZW5ndGggPT09IDE1KXtcclxuICAgICAgICBjYXJkTnVtYmVyID0gY2FyZE51bWJlci50b1N0cmluZygpLnJlcGxhY2UoL1xcRC9nLFwiXCIpO1xyXG4gICAgICAgIGNhcmROdW1iZXIgPSBjYXJkTnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvKFxcZHs0fSkoXFxkKS8sXCIkMSAkMlwiKTtcclxuICAgICAgICBjYXJkTnVtYmVyID0gY2FyZE51bWJlci50b1N0cmluZygpLnJlcGxhY2UoLyhcXGR7Nn0pKFxcZCkvLFwiJDEgJDJcIik7XHJcbiAgICAgICAgY2FyZE51bWJlciA9IGNhcmROdW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC8oXFxkezZ9KShcXGQpLyxcIiQxICQyXCIpO1xyXG4gICAgICAgICQoXCIuY2FyZENWQ1wiKS5hdHRyKCdtYXhsZW5ndGgnLCc0Jyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FyZE51bWJlciA9IGNhcmROdW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEQvZyxcIlwiKTtcclxuICAgICAgICBjYXJkTnVtYmVyID0gY2FyZE51bWJlci50b1N0cmluZygpLnJlcGxhY2UoLyhcXGR7NH0pKFxcZCkvLFwiJDEgJDJcIik7XHJcbiAgICAgICAgY2FyZE51bWJlciA9IGNhcmROdW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC8oXFxkezR9KShcXGQpLyxcIiQxICQyXCIpO1xyXG4gICAgICAgIGNhcmROdW1iZXIgPSBjYXJkTnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvKFxcZHs0fSkoXFxkKS8sXCIkMSAkMlwiKTtcclxuICAgICAgICBjYXJkTnVtYmVyID0gY2FyZE51bWJlci50b1N0cmluZygpLnJlcGxhY2UoLyhcXGR7NH0pKFxcZCkvLFwiJDEgJDJcIik7XHJcbiAgICAgICAgJChcIi5jYXJkQ1ZDXCIpLmF0dHIoJ21heGxlbmd0aCcsJzMnKTtcclxuICAgICAgfVxyXG4gICAgICAkKGlucHV0SWQpLnZhbChjYXJkTnVtYmVyKTtcclxuICAgIH0pO1xyXG4gICAgJChpbnB1dElkKS5vbignZm9jdXMnLCAoKSA9PiB7XHJcbiAgICAgICQoaW5wdXRJZCkuYXR0cignbWF4bGVuZ3RoJywnMTYnKTtcclxuICAgICAgdmFyIGNhcmROdW1iZXIgPSAkKGlucHV0SWQpLnZhbCgpO1xyXG4gICAgICBjYXJkTnVtYmVyID0gY2FyZE51bWJlci50b1N0cmluZygpLnJlcGxhY2UoL1teMC05XS9nLCAnJyk7XHJcbiAgICAgICQoaW5wdXRJZCkudmFsKGNhcmROdW1iZXIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufTtcclxuIiwidmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xyXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCIuLi9saWJzXCIpLkhhbmRsZWJhcnM7XHJcblxyXG5jbGFzcyBoYlRlbXBsYXRlIHtcclxuICBjb25zdHJ1Y3Rvcih0bmFtZSwgZGF0YSkge1xyXG4gICAgdGhpcy5uYW1lID0gdG5hbWU7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5wcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuaHRtbCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBzdGFydChwKSB7XHJcbiAgICB0aGlzLnByb21pc2UgPSBwO1xyXG4gIH07XHJcbiAgZ2V0SHRtbChmbikgeyByZXR1cm4gdGhpcy5wcm9taXNlLnRoZW4oZm4pOyB9O1xyXG4gIGFwcGVuZChkaXYpIHsgXHJcbiAgICByZXR1cm4gdGhpcy5nZXRIdG1sKCBoID0+ICQoZGl2KS5hcHBlbmQoaCkgKTsgXHJcbiAgfTtcclxuICBpbnRvIChkaXYpIHsgXHJcbiAgICByZXR1cm4gdGhpcy5nZXRIdG1sKCBoID0+ICQoZGl2KS5odG1sKGgpICk7IFxyXG4gIH07XHJcblxyXG59O1xyXG5cclxudmFyIEhhbmRsZWJhcnNJbnN0YW5jZSA9IG51bGw7XHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgSGFuZGxlYmFyTG9hZGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIGlmKEhhbmRsZWJhcnNJbnN0YW5jZSkgcmV0dXJuIEhhbmRsZWJhcnNJbnN0YW5jZTtcclxuICAgIHRoaXMudGVtcGxhdGVMb2NhbCA9IFwiLi4vc3JjL3RlbXBsYXRlcy9cIjtcclxuICAgIHRoaXMudGVtcGxhdGVOYW1lO1xyXG4gICAgdGhpcy5oYW5kbGViYXJzID0gSGFuZGxlYmFycztcclxuICAgIEhhbmRsZWJhcnNJbnN0YW5jZSA9IHRoaXM7XHJcbiAgfVxyXG5cclxuICBnZXRUZW1wbGF0ZUZpbGUobmFtZSkge1xyXG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVMb2NhbCArIG5hbWUgKyBcIi5oYnNcIjtcclxuICB9O1xyXG5cclxuICBjcmVhdGVIYlRlbXBsYXRlKHQsIGRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgaGJUZW1wbGF0ZSh0LCBkYXRhKTtcclxuICB9XHJcblxyXG4gIGxvYWRUZW1wbGF0ZSh0LCBkYXRhKSB7XHJcbiAgICBsZXQgdGVtcGxhdGVPYmogPSB0aGlzLmNyZWF0ZUhiVGVtcGxhdGUodCwgZGF0YSk7XHJcbiAgICB0ZW1wbGF0ZU9iai5zdGFydChcclxuICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZUZpbGUgPSB0aGlzLmdldFRlbXBsYXRlRmlsZSh0KTtcclxuICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICBpZih4aHR0cC5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgaWYgKHhodHRwLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJsb2FkZWQgdGVtcGxhdGU6IFwiICsgdGVtcGxhdGVGaWxlLCBkYXRhKTtcclxuICAgICAgICAgICAgICBsZXQgdGVtcGxhdGVTY3JpcHQgPSB0aGlzLmhhbmRsZWJhcnMuY29tcGlsZSh4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgIGxldCBodG1sID0gdGVtcGxhdGVTY3JpcHQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShodG1sKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oeGh0dHApO1xyXG4gICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiB4aHR0cC5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB4aHR0cC5zdGF0dXNUZXh0XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHhodHRwLm9wZW4oXCJHRVRcIiwgdGVtcGxhdGVGaWxlLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZW5kKCk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlT2JqO1xyXG4gIH07XHJcblxyXG59O1xyXG4iLCJ2YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNtaWxlc1NlcnZlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmhvc3QgPSBcImh0dHA6Ly9sb2NhbGhvc3Quc21pbGVzLmNvbS5icjo4ODg4XCI7XHJcbiAgICB0aGlzLnRpbWVvdXRUaW1lID0gMzAwMDA7XHJcbiAgICB0aGlzLmNoZWNrb3V0VG9rZW4gPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVycyAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgXCIgKyB0aGlzLmNoZWNrb3V0VG9rZW4sXHJcbiAgICAgIFwiQ2hhbm5lbFwiOiBcIkFQUFwiLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldCh1cmwpIHtcclxuLy8gICAgY29uc29sZS5pbmZvKFwic2VydmVyLWdldDogXCIgKyB1cmwpO1xyXG4gICAgdmFyIGRlZmVyID0gbmV3IFByb21pc2UoIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSxcclxuICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXRUaW1lLFxyXG4gICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiByZXNvbHZlKGRhdGEpLFxyXG4gICAgICAgIGVycm9yOiAoZGF0YSkgPT4gcmVqZWN0KGRhdGEpXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGVmZXI7XHJcbiAgfTtcclxuICBwb3N0ICh1cmwsIGRhdGEpIHtcclxuLy8gICAgY29uc29sZS5pbmZvKFwic2VydmVyLXBvc3Q6IFwiICsgdXJsLCBkYXRhKTtcclxuICAgIHZhciBkZWZlciA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXHJcbiAgICAgICAgdGltZW91dDogdGhpcy50aW1lb3V0VGltZSxcclxuICAgICAgICBzdWNjZXNzOiAoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSxcclxuICAgICAgICBlcnJvcjogKGRhdGEpID0+IHJlamVjdChkYXRhKVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGRlZmVyO1xyXG4gIH07XHJcblxyXG4gIGdldFRva2VuSW5mbygpIHtcclxuICAgIGxldCB1cmwgPSB0aGlzLmhvc3QgKyBcIi9hcGkvb2F1dGgvdG9rZW5pbmZvXCI7XHJcbiAgICBsZXQgZGVmZXIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIHRoaXMuZ2V0KHVybClcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBkZWZlcjtcclxuICB9O1xyXG4gIGdldENoZWNrb3V0KCkge1xyXG4gICAgbGV0IHVybCA9IHRoaXMuaG9zdCArIFwiL2FwaS9jaGVja291dFwiO1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0KHVybCk7XHJcbiAgfTtcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGxldCB1cmwgPSB0aGlzLmhvc3QgKyBcIi9hcGkvdXNlclwiO1xyXG4vLyAgICByZXR1cm4gdGhpcy5nZXQodXJsKTtcclxuICAgIHJldHVybiB0aGlzLmZha2VDcmVkaXRDYXJkcygpO1xyXG4gIH07XHJcblxyXG4gIGZha2VDcmVkaXRDYXJkcygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGxldCBjY3MgPSB7XHJcbiAgICAgICAgbWVtYmVyTnVtYmVyOiA3Nzc3LFxyXG4gICAgICAgIHNhdmVkQ3JlZGl0Q2FyZHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDEsXHJcbiAgICAgICAgICAgIGJyYW5kOiBcIlZJU0FcIixcclxuICAgICAgICAgICAgbnVtYmVyOiBcIjMwMTUzMzY1MDA1OTAyMjNcIixcclxuICAgICAgICAgICAgbWFpbjogdHJ1ZVxyXG4gICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBpZDogNDIsXHJcbiAgICAgICAgICAgIGJyYW5kOiBcIk1BU1RFUkNBUkRcIixcclxuICAgICAgICAgICAgbnVtYmVyOiBcIjgzMTUxNzkxMzc5NTE5ODdcIixcclxuICAgICAgICAgICAgbWFpbjogZmFsc2VcclxuICAgICAgICAgIH0gICBcclxuICAgICAgICBdXHJcbiAgICAgIH07XHJcbiAgICAgIHJlc29sdmUoY2NzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn07XHJcbiJdfQ=="}